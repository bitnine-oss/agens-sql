<sect1 id="pgpool-II-config">
 <title>설정</title>
 <sect2><title>pgpool.conf 설정</title>
<itemizedlist>
    <listitem>
        <para>pgpool.conf 생성</para>
<para>pgpool-II는 Agens SQL 인스톨러를 통해 설치가 되며 pgpool-II를 실행하기 위해서는 설정값이 기록되어 있는 pgpool.conf파일이 필요하다. pgpool-II를 설치하면 pgpool.conf.sample이 자동적으로 생성되어 있고 이를 복제하여 사용할 것을 권장한다.</para>
<screen><prompt>$ </prompt><userinput>cp /path/to/pgpool-II/etc/pgpool.conf.sample /path/to/pgpool-II/etc/pgpool.conf</userinput></screen>
<para>pgpool.conf파일은 파라미터를 "name = value"쌍의 형태로 저장한다. </para></listitem>
<listitem><para>listen_addresses 및 port 설정</para>
<para>pgpool-II는 기본적으로 localhost에서 포트 번호 9999로 접속이 가능하게 설정되어 있다. 하지만 pgpool.conf파일의 listen_address의 값을 '*'로 바꾸면 모든 호스트에서 접속할 수 있고 특정 ip주소를 사용하여 설정할 수도 있다. 또한 포트 번호도 수정 할 수 있다.
<screen>
    ...
    listen_addresses = 'localhost'
    port = 9999
    ...
</screen></para></listitem>
<listitem><para>backend 설정</para>
<para>pgpool.conf에는 pgpool-II가 연결할 PostgreSQL backend를 설정해야 한다. pgpool-II는 하나 이상의 PostgreSQL backend를 설정할 수 있고, 'backend_' 접두어로 시작하며 파라미터이름 끝에 0부터 시작하는 번호가 붙는다.
<screen>
    ...
    # - Backend Connection Settings -

    backend_hostname0 = 'localhost'
    backend_port0 = 5432
    backend_weight0 = 1
    backend_data_directory0 = '/path/to/Agens_SQL/pgsql/data'
    backend_flag0 = 'ALLOW_TO_FAILOVER'
    ...
</screen></para></listitem>

<listitem><para>FILE LOCATIONS 설정</para>
<para>pgpool.conf파일에 FILE LOCATIONS 영역은 실제 pid파일과 log파일이 기록될 경로를 작성해야하며, pgpool-II가 해당 영역에 접근할 권한이 없거나 해당 디렉토리가 존재하지 않을 때 실행되지 않는다. </para>
<para>다음의 파라미터가 생성될 수 있는 디렉터리를 생성하거나 이미 존재하는 디렉터리로 경로를 변경해야 한다.</para>
<programlisting>
#------------------------------------------------------------------------------
# FILE LOCATIONS
#------------------------------------------------------------------------------
    ...
    pid_file_name = '/path/to/pgpool/pgpool.pid'
    logdir = '/path/to/pgpool'
    ...
</programlisting></listitem>
<listitem><para>실행 모드 설정</para>
<para>pgpool-II는 설정에 따라서 몇가지 실행모드를 가지고 있는데, 그 기능을 사용하기 위해서는 pgpool.conf 파일의 해당 파라미터를 on으로 변경한다. </para>
<para>pgpool.conf에서 주요기능을 선택하는 파라미터는 다음과 같다.</para>
<itemizedlist>
    <listitem>
        <para>connection_cache </para>
    </listitem>
</itemizedlist>
<itemizedlist>
    <listitem>
        <para>replication_mode</para>
    </listitem>
</itemizedlist>
<itemizedlist>
    <listitem>
        <para>load_balance_mode</para>
    </listitem>
</itemizedlist>
<itemizedlist>
    <listitem>
        <para>master_slave_mode</para>
    </listitem>
    <listitem>
        <para>master_slave_sub_mode = 'slony' 또는 'stream' </para>
    </listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</sect2>
</sect1>
